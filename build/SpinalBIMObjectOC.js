"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
const globalType = typeof window === "undefined" ? global : window;
const spinalCore = require("spinal-core-connectorjs");
const BIMForge = require("spinal-models-bim_forge");

let getViewer = function () {
  return globalType.v;
};

class SpinalBIMObjectOC extends BIMForge.SpinalBIMObjectForge {
  constructor(itemId, groupId, name = "SpinalBIMObjectOC") {
    super();
    if (FileSystem._sig_server) {
      this.add_attr({
        groupId: groupId
      });
      this.id.set(itemId);
      this.display.set(true);
    }
  }

  fillInfo() {
    return new Promise((resolve, reject) => {
      getViewer().getProperties(this.id.get(), r => {
        this.name.set(r.name);
        resolve();
      });
    });
  }
}

exports.default = SpinalBIMObjectOC;
spinalCore.register_models([SpinalBIMObjectOC]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TcGluYWxCSU1PYmplY3RPQy5qcyJdLCJuYW1lcyI6WyJnbG9iYWxUeXBlIiwid2luZG93IiwiZ2xvYmFsIiwic3BpbmFsQ29yZSIsInJlcXVpcmUiLCJCSU1Gb3JnZSIsImdldFZpZXdlciIsInYiLCJTcGluYWxCSU1PYmplY3RPQyIsIlNwaW5hbEJJTU9iamVjdEZvcmdlIiwiY29uc3RydWN0b3IiLCJpdGVtSWQiLCJncm91cElkIiwibmFtZSIsIkZpbGVTeXN0ZW0iLCJfc2lnX3NlcnZlciIsImFkZF9hdHRyIiwiaWQiLCJzZXQiLCJkaXNwbGF5IiwiZmlsbEluZm8iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImdldFByb3BlcnRpZXMiLCJnZXQiLCJyIiwicmVnaXN0ZXJfbW9kZWxzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLGFBQWEsT0FBT0MsTUFBUCxLQUFrQixXQUFsQixHQUFnQ0MsTUFBaEMsR0FBeUNELE1BQTVEO0FBQ0EsTUFBTUUsYUFBYUMsUUFBUSx5QkFBUixDQUFuQjtBQUNBLE1BQU1DLFdBQVdELFFBQVEseUJBQVIsQ0FBakI7O0FBRUEsSUFBSUUsWUFBWSxZQUFXO0FBQ3pCLFNBQU9OLFdBQVdPLENBQWxCO0FBQ0QsQ0FGRDs7QUFJZSxNQUFNQyxpQkFBTixTQUFnQ0gsU0FBU0ksb0JBQXpDLENBQThEO0FBQzNFQyxjQUFZQyxNQUFaLEVBQW9CQyxPQUFwQixFQUE2QkMsT0FBTyxtQkFBcEMsRUFBeUQ7QUFDdkQ7QUFDQSxRQUFJQyxXQUFXQyxXQUFmLEVBQTRCO0FBQzFCLFdBQUtDLFFBQUwsQ0FBYztBQUNaSixpQkFBU0E7QUFERyxPQUFkO0FBR0EsV0FBS0ssRUFBTCxDQUFRQyxHQUFSLENBQVlQLE1BQVo7QUFDQSxXQUFLUSxPQUFMLENBQWFELEdBQWIsQ0FBaUIsSUFBakI7QUFDRDtBQUNGOztBQUVERSxhQUFXO0FBQ1QsV0FBTyxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3RDakIsa0JBQVlrQixhQUFaLENBQTBCLEtBQUtQLEVBQUwsQ0FBUVEsR0FBUixFQUExQixFQUF5Q0MsS0FBSztBQUM1QyxhQUFLYixJQUFMLENBQVVLLEdBQVYsQ0FBY1EsRUFBRWIsSUFBaEI7QUFDQVM7QUFDRCxPQUhEO0FBSUQsS0FMTSxDQUFQO0FBTUQ7QUFuQjBFOztrQkFBeERkLGlCO0FBc0JyQkwsV0FBV3dCLGVBQVgsQ0FBMkIsQ0FBQ25CLGlCQUFELENBQTNCIiwiZmlsZSI6IlNwaW5hbEJJTU9iamVjdE9DLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2xvYmFsVHlwZSA9IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB3aW5kb3c7XG5jb25zdCBzcGluYWxDb3JlID0gcmVxdWlyZShcInNwaW5hbC1jb3JlLWNvbm5lY3RvcmpzXCIpO1xuY29uc3QgQklNRm9yZ2UgPSByZXF1aXJlKFwic3BpbmFsLW1vZGVscy1iaW1fZm9yZ2VcIik7XG5cbmxldCBnZXRWaWV3ZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGdsb2JhbFR5cGUudjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BpbmFsQklNT2JqZWN0T0MgZXh0ZW5kcyBCSU1Gb3JnZS5TcGluYWxCSU1PYmplY3RGb3JnZSB7XG4gIGNvbnN0cnVjdG9yKGl0ZW1JZCwgZ3JvdXBJZCwgbmFtZSA9IFwiU3BpbmFsQklNT2JqZWN0T0NcIikge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKEZpbGVTeXN0ZW0uX3NpZ19zZXJ2ZXIpIHtcbiAgICAgIHRoaXMuYWRkX2F0dHIoe1xuICAgICAgICBncm91cElkOiBncm91cElkXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaWQuc2V0KGl0ZW1JZCk7XG4gICAgICB0aGlzLmRpc3BsYXkuc2V0KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZpbGxJbmZvKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnZXRWaWV3ZXIoKS5nZXRQcm9wZXJ0aWVzKHRoaXMuaWQuZ2V0KCksIHIgPT4ge1xuICAgICAgICB0aGlzLm5hbWUuc2V0KHIubmFtZSk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbnNwaW5hbENvcmUucmVnaXN0ZXJfbW9kZWxzKFtTcGluYWxCSU1PYmplY3RPQ10pIl19